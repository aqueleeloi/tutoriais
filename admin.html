<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - creativeHUB</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #050505; color: white; padding: 40px; line-height: 1.6; }
        .container { max-width: 900px; margin: 0 auto; background: #111; padding: 40px; border-radius: 16px; border: 1px solid #333; }
        h2 { text-align: center; margin-bottom: 30px; color: #00C6FF; font-weight: 800; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; background: #161616; padding: 25px; border-radius: 12px; margin-bottom: 30px; }
        .full { grid-column: span 2; }
        
        label { font-size: 0.8rem; color: #888; font-weight: 600; text-transform: uppercase; margin-bottom: 5px; display: block; }
        input, select, textarea { width: 100%; padding: 12px; background: #050505; border: 1px solid #333; color: white; border-radius: 8px; outline: none; font-family: inherit; }
        input:focus { border-color: #00C6FF; }

        .btn { padding: 15px; width: 100%; cursor: pointer; font-weight: bold; border-radius: 8px; margin-top: 10px; border: none; transition: 0.3s; }
        .save { background: #00C6FF; color: #000; font-size: 1rem; }
        .save:hover { background: #008ecc; transform: translateY(-2px); }
        .dl { background: #22c55e; color: white; margin-top: 30px; box-shadow: 0 0 20px rgba(34, 197, 94, 0.2); }
        
        .item-list { margin-top: 40px; }
        .item { background: #161616; padding: 15px 20px; border-radius: 10px; border: 1px solid #222; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .item:hover { border-color: #444; }
        .item-info b { color: #fff; display: block; }
        .item-info small { color: #555; }
        
        .actions { display: flex; gap: 8px; }
        .actions button { width: 35px; height: 35px; border: none; border-radius: 6px; cursor: pointer; color: white; transition: 0.2s; }
        .up, .down { background: #333; }
        .edit { background: #eab308; }
        .del { background: #ef4444; }
        .actions button:hover { filter: brightness(1.2); transform: scale(1.1); }

        /* TOAST MESSAGE */
        #toast { position: fixed; bottom: 30px; right: 30px; padding: 15px 30px; border-radius: 10px; background: #22c55e; color: white; font-weight: 700; transform: translateY(100px); transition: 0.5s; z-index: 1000; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        #toast.show { transform: translateY(0); }
    </style>
</head>
<body>

<div id="toast">Alterações gravadas com sucesso!</div>

<div class="container">
    <h2><i class="fas fa-tools"></i> creativeHUB Admin</h2>
    
    <input type="hidden" id="editIndex" value="">

    <div class="form-grid">
        <div>
            <label>Secção Principal</label>
            <select id="section">
                <option value="SOFTWARE">Software Lab</option>
                <option value="MARKETING">Marketing Toolkit</option>
                <option value="INSPIRATION">Mindset & Cultura</option>
            </select>
        </div>
        <div>
            <label>Sub-Categoria (ps, pp, cv, mk, in)</label>
            <input type="text" id="program" placeholder="Ex: ps">
        </div>
        <div>
            <label>Tipo de Conteúdo</label>
            <select id="type">
                <option value="video">Vídeo (YouTube)</option>
                <option value="doc">Documento / Link Externo</option>
            </select>
        </div>
        <div>
            <label>Etiqueta (Tag)</label>
            <input type="text" id="tag" placeholder="Ex: Iniciante">
        </div>
        <div class="full">
            <label>ID do Vídeo ou URL do Link</label>
            <input type="text" id="id" placeholder="ID do youtube (ex: I5k5Qj_VaaE) ou Link completo">
        </div>
        <div class="full">
            <label>Título do Conteúdo</label>
            <input type="text" id="title" placeholder="Nome visível no card">
        </div>
        <div class="full">
            <label>Descrição Curta</label>
            <textarea id="desc" rows="2" placeholder="Breve explicação..."></textarea>
        </div>
        <div class="full">
            <label>URL da Thumbnail (Imagem)</label>
            <input type="text" id="thumb" placeholder="https://images.unsplash.com/...">
        </div>
        
        <button class="btn save" id="mainBtn" onclick="saveData()">
            <i class="fas fa-plus-circle"></i> Adicionar à Lista
        </button>
    </div>

    <div class="item-list">
        <h3>Lista de Conteúdos (<span id="count">0</span>)</h3>
        <div id="list"></div>
    </div>

    <button class="btn dl" onclick="downloadJS()">
        <i class="fas fa-download"></i> BAIXAR NOVO VIDEOS.JS
    </button>
</div>

<script src="videos.js"></script>
<script>
    let data = (typeof tutorialData !== 'undefined') ? tutorialData : [];

    function showToast(msg, color = "#22c55e") {
        const t = document.getElementById('toast');
        t.innerText = msg;
        t.style.background = color;
        t.classList.add('show');
        setTimeout(() => t.classList.remove('show'), 3000);
    }

    function render() {
        document.getElementById('count').innerText = data.length;
        const listEl = document.getElementById('list');
        listEl.innerHTML = data.map((item, i) => `
            <div class="item">
                <div class="item-info">
                    <b>${item.title}</b>
                    <small>${item.section} | ${item.program} | ${item.tag}</small>
                </div>
                <div class="actions">
                    <button class="up" title="Mover para cima" onclick="move(${i}, -1)"><i class="fas fa-arrow-up"></i></button>
                    <button class="down" title="Mover para baixo" onclick="move(${i}, 1)"><i class="fas fa-arrow-down"></i></button>
                    <button class="edit" title="Editar" onclick="prepareEdit(${i})"><i class="fas fa-pen"></i></button>
                    <button class="del" title="Apagar" onclick="removeItem(${i})"><i class="fas fa-trash"></i></button>
                </div>
            </div>
        `).join('');
    }

    function saveData() {
        const editIdx = document.getElementById('editIndex').value;
        
        const newItem = {
            section: document.getElementById('section').value,
            program: document.getElementById('program').value,
            type: document.getElementById('type').value,
            tag: document.getElementById('tag').value,
            title: document.getElementById('title').value,
            desc: document.getElementById('desc').value,
            id: document.getElementById('id').value,
            thumb: document.getElementById('thumb').value
        };

        if(newItem.title === "" || newItem.id === "") return alert("Título e ID são obrigatórios!");

        if(editIdx === "") {
            data.push(newItem);
            showToast("Conteúdo adicionado!");
        } else {
            data[editIdx] = newItem;
            document.getElementById('editIndex').value = "";
            document.getElementById('mainBtn').innerHTML = '<i class="fas fa-plus-circle"></i> Adicionar à Lista';
            document.getElementById('mainBtn').style.background = "#00C6FF";
            showToast("Alterações guardadas!");
        }

        clearForm();
        render();
    }

    function prepareEdit(i) {
        const item = data[i];
        document.getElementById('editIndex').value = i;
        document.getElementById('section').value = item.section;
        document.getElementById('program').value = item.program;
        document.getElementById('type').value = item.type;
        document.getElementById('tag').value = item.tag;
        document.getElementById('id').value = item.id;
        document.getElementById('title').value = item.title;
        document.getElementById('desc').value = item.desc;
        document.getElementById('thumb').value = item.thumb || "";

        document.getElementById('mainBtn').innerHTML = '<i class="fas fa-check-circle"></i> Atualizar Item';
        document.getElementById('mainBtn').style.background = "#eab308";
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function clearForm() {
        document.getElementById('program').value = "";
        document.getElementById('tag').value = "";
        document.getElementById('id').value = "";
        document.getElementById('title').value = "";
        document.getElementById('desc').value = "";
        document.getElementById('thumb').value = "";
    }

    function removeItem(i) {
        if(confirm("Tens a certeza que queres apagar este item?")) {
            data.splice(i, 1);
            render();
            showToast("Item removido!", "#ef4444");
        }
    }

    function move(i, step) {
        const nl = i + step;
        if(nl >= 0 && nl < data.length) {
            const temp = data[i];
            data[i] = data[nl];
            data[nl] = temp;
            render();
            showToast("Posição alterada!");
        }
    }

    function downloadJS() {
        const content = `const tutorialData = ${JSON.stringify(data, null, 2)};`;
        const blob = new Blob([content], { type: 'text/javascript' });
        const a = document.createElement('a');
        a.href = URL.createObjectURL(blob);
        a.download = 'videos.js';
        a.click();
        showToast("Ficheiro pronto! Substitui o antigo na tua pasta.");
    }

    render();
</script>

</body>
</html>
