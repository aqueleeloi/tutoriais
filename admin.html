<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <title>Admin - Creative Hub</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #0f172a; color: white; padding: 30px; }
        .container { max-width: 900px; margin: 0 auto; background: #1e293b; padding: 30px; border-radius: 12px; }
        
        h2 { text-align: center; color: #38bdf8; margin-bottom: 30px; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .full { grid-column: span 2; }
        
        label { display: block; color: #94a3b8; font-size: 0.85rem; margin-bottom: 5px; }
        input, select { width: 100%; padding: 12px; background: #0f172a; border: 1px solid #334155; color: white; border-radius: 6px; outline: none; }
        input:focus { border-color: #38bdf8; }

        .btn { padding: 15px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 10px; }
        .add { background: #22c55e; color: white; grid-column: span 2; }
        .dl { background: #38bdf8; color: #0f172a; font-size: 1.1rem; margin-top: 30px; }

        .item { background: #0f172a; padding: 15px; margin-bottom: 10px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; border-left: 4px solid #334155; }
        .actions button { width: 30px; height: 30px; border: none; border-radius: 4px; margin-left: 5px; cursor: pointer; }
        .del { background: #ef4444; color: white; }
    </style>
</head>
<body>

<div class="container">
    <h2><i class="fas fa-database"></i> Admin Panel</h2>

    <div class="form-grid">
        <div>
            <label>1. Secção Principal</label>
            <select id="section">
                <option value="SOFTWARE">Software Lab</option>
                <option value="MARKETING">Marketing Toolkit</option>
                <option value="INSPIRATION">Mindset & Cultura</option>
            </select>
        </div>
        <div>
            <label>2. Programa (Só se for Software)</label>
            <input type="text" id="program" list="progList" placeholder="Código (ex: ps, pp, cv)">
            <datalist id="progList">
                <option value="ps">Photoshop</option>
                <option value="pp">Photopea</option>
                <option value="cv">Canva</option>
            </datalist>
        </div>

        <div>
            <label>3. Tipo</label>
            <select id="type">
                <option value="video">Vídeo (YouTube)</option>
                <option value="doc">Documento / Link</option>
            </select>
        </div>
        <div>
            <label>4. Categoria (Tag)</label>
            <input type="text" id="tag" placeholder="Ex: Iniciante, Recursos...">
        </div>

        <div class="full">
            <label>Link do Conteúdo (YouTube ou Site)</label>
            <input type="text" id="url" placeholder="URL Completo...">
        </div>

        <div class="full">
            <label>Título</label>
            <input type="text" id="title">
        </div>

        <div class="full">
            <label>Descrição</label>
            <input type="text" id="desc">
        </div>

        <div class="full">
            <label>Link da Imagem de Capa (Opcional p/ Vídeos, Obrigatório p/ Docs)</label>
            <input type="text" id="thumb" placeholder="https://images.unsplash.com/...">
        </div>

        <button class="btn add" onclick="addItem()">Adicionar Conteúdo</button>
    </div>

    <div style="margin-top: 40px; border-top: 1px solid #334155; padding-top: 20px;">
        <h3>Lista (<span id="count">0</span>)</h3>
        <div id="list"></div>
    </div>

    <button class="btn dl" onclick="downloadFile()">SALVAR (Baixar videos.js)</button>
</div>

<script src="videos.js"></script>
<script>
    let data = (typeof tutorialData !== 'undefined') ? tutorialData : [];

    function render() {
        const list = document.getElementById('list');
        list.innerHTML = '';
        document.getElementById('count').innerText = data.length;

        data.forEach((item, i) => {
            list.innerHTML += `
                <div class="item">
                    <div>
                        <strong>${item.title}</strong>
                        <small style="color:#94a3b8; margin-left:10px">${item.section} > ${item.program || 'Geral'}</small>
                    </div>
                    <div class="actions">
                        <button class="del" onclick="del(${i})"><i class="fas fa-trash"></i></button>
                    </div>
                </div>`;
        });
    }

    function addItem() {
        const url = document.getElementById('url').value;
        const title = document.getElementById('title').value;
        const type = document.getElementById('type').value;

        if(!url || !title) { alert("Link e Título obrigatórios!"); return; }

        let finalId = url;
        if(type === 'video') {
            const match = url.match(/(?:v=|\/)([\w-]{11})/);
            if(match) finalId = match[1];
        }

        data.push({
            section: document.getElementById('section').value,
            program: document.getElementById('program').value,
            type: type,
            tag: document.getElementById('tag').value,
            title: title,
            desc: document.getElementById('desc').value,
            id: finalId,
            thumb: document.getElementById('thumb').value // Salva a imagem custom
        });

        render();
        // Limpar campos simples
        document.getElementById('title').value = '';
        document.getElementById('url').value = '';
    }

    function del(i) { if(confirm("Apagar?")) { data.splice(i, 1); render(); } }

    function downloadFile() {
        const content = "const tutorialData = " + JSON.stringify(data, null, 2) + ";";
        const blob = new Blob([content], {type: "text/javascript"});
        const link = document.createElement("a");
        link.href = URL.createObjectURL(blob);
        link.download = "videos.js";
        link.click();
    }
    render();
</script>
</body>
</html>
