<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Outfit', sans-serif; background: #050505; color: white; padding: 40px; }
        .container { max-width: 800px; margin: 0 auto; background: #141414; padding: 40px; border-radius: 16px; border: 1px solid #333; }
        h2 { text-align: center; margin-bottom: 30px; color: #00C6FF; }
        input, select { width: 100%; padding: 12px; margin-bottom: 15px; background: #080808; border: 1px solid #333; color: white; border-radius: 6px; }
        .btn { padding: 15px; width: 100%; cursor: pointer; font-weight: bold; border-radius: 6px; margin-top: 10px; border: none; }
        .save { background: #22c55e; color: white; }
        .dl { background: #00C6FF; color: black; margin-top: 30px; }
        .item { padding: 15px; border-bottom: 1px solid #222; display: flex; justify-content: space-between; align-items: center; }
    </style>
</head>
<body>
<div class="container">
    <h2>Admin Panel</h2>
    
    <label>Secção:</label>
    <select id="section">
        <option value="SOFTWARE">Software Lab</option>
        <option value="MARKETING">Marketing Toolkit</option>
        <option value="INSPIRATION">Mindset & Cultura</option>
    </select>

    <label>Programa (Só para Software):</label>
    <select id="program"><option value="ps">Photoshop</option><option value="pp">Photopea</option><option value="cv">Canva</option><option value="mk">Marketing</option><option value="in">Inspo</option></select>

    <label>Tipo:</label>
    <select id="type"><option value="video">Vídeo</option><option value="doc">Documento</option></select>

    <input type="text" id="tag" placeholder="Tag (ex: Iniciante)">
    <input type="text" id="url" placeholder="Link / URL">
    <input type="text" id="title" placeholder="Título">
    <input type="text" id="desc" placeholder="Descrição">
    <input type="text" id="thumb" placeholder="Link da Imagem (Opcional)">

    <button class="btn save" onclick="add()">Adicionar</button>
    <button class="btn dl" onclick="download()">BAIXAR VIDEOS.JS</button>

    <div id="list" style="margin-top:30px"></div>
</div>

<script src="videos.js"></script>
<script>
    let data = (typeof tutorialData !== 'undefined') ? tutorialData : [];
    
    function render() {
        document.getElementById('list').innerHTML = data.map((item, i) => `
            <div class="item">
                <div><b>${item.title}</b> (${item.section})</div>
                <button onclick="del(${i})" style="background:red; color:white; border:none; padding:5px 10px; border-radius:4px">X</button>
            </div>
        `).join('');
    }

    function add() {
        let url = document.getElementById('url').value;
        let id = url;
        if(document.getElementById('type').value === 'video') {
            let match = url.match(/(?:v=|\/)([\w-]{11})/);
            if(match) id = match[1];
        }

        data.push({
            section: document.getElementById('section').value,
            program: document.getElementById('program').value,
            type: document.getElementById('type').value,
            tag: document.getElementById('tag').value,
            title: document.getElementById('title').value,
            desc: document.getElementById('desc').value,
            id: id,
            thumb: document.getElementById('thumb').value
        });
        render();
    }

    function del(i) { data.splice(i,1); render(); }

    function download() {
        const link = document.createElement("a");
        link.href = URL.createObjectURL(new Blob(["// Base de dados\nconst tutorialData = " + JSON.stringify(data, null, 2) + ";"], {type: "text/javascript"}));
        link.download = "videos.js";
        link.click();
    }
    render();
</script>
</body>
</html>
