<!DOCTYPE html>
<html lang="pt-pt">
<head>
    <meta charset="UTF-8">
    <title>Admin creativeHUB - Gerador de Código</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #050505; color: white; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; background: #111; padding: 30px; border-radius: 16px; border: 1px solid #333; }
        
        .step-box { background: rgba(0, 198, 255, 0.05); border: 2px solid #00C6FF; padding: 20px; border-radius: 12px; margin-bottom: 30px; }
        .step-box h3 { color: #00C6FF; margin-bottom: 10px; font-size: 1rem; }
        
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; background: #161616; padding: 20px; border-radius: 12px; }
        .full { grid-column: span 2; }
        
        label { font-size: 0.75rem; color: #888; font-weight: 700; text-transform: uppercase; display: block; margin-bottom: 5px; }
        input, select, textarea { width: 100%; padding: 12px; background: #050505; border: 1px solid #333; color: white; border-radius: 8px; outline: none; }
        
        .btn { padding: 15px; width: 100%; cursor: pointer; font-weight: bold; border-radius: 8px; border: none; transition: 0.3s; margin-top: 10px; }
        .save-item { background: #00C6FF; color: #000; }
        
        /* ÁREA DE CÓDIGO */
        .code-output { margin-top: 30px; background: #000; padding: 20px; border-radius: 12px; border: 1px solid #444; }
        #codeArea { width: 100%; height: 200px; background: transparent; color: #00FF00; font-family: monospace; border: none; resize: none; margin-top: 10px; }
        .copy-btn { background: #22c55e; color: white; }

        .item { background: #161616; padding: 12px; border-radius: 10px; border: 1px solid #222; display: flex; justify-content: space-between; align-items: center; margin-top: 8px; }
        .actions button { width: 32px; height: 32px; border: none; border-radius: 6px; cursor: pointer; color: white; margin-left: 5px; }
        .edit { background: #eab308; } .del { background: #ef4444; }
    </style>
</head>
<body>

<div class="container">
    <div class="step-box">
        <h3><i class="fas fa-magic"></i> COMO ATUALIZAR O SITE:</h3>
        <p style="font-size: 0.9rem;">1. Adiciona ou edita os vídeos abaixo.<br>
           2. Clica no botão verde <b>"GERAR CÓDIGO PARA VIDEOS.JS"</b>.<br>
           3. <b>Copia o código</b> que aparecer e substitui TODO o texto dentro do teu ficheiro <b>videos.js</b>.</p>
    </div>

    <h2>Admin Panel</h2>
    
    <input type="hidden" id="editIndex" value="">

    <div class="form-grid">
        <div>
            <label>Secção Principal</label>
            <select id="section">
                <option value="SOFTWARE">Software Lab</option>
                <option value="MARKETING">Marketing Toolkit</option>
                <option value="INSPIRATION">Mindset & Cultura</option>
            </select>
        </div>
        <div>
            <label>Sub-Categoria (ps, pp, cv)</label>
            <input type="text" id="program" placeholder="ps">
        </div>
        <div class="full">
            <label>ID Youtube ou Link</label>
            <input type="text" id="id" placeholder="Ex: I5k5Qj_VaaE">
        </div>
        <div class="full">
            <label>Título</label>
            <input type="text" id="title">
        </div>
        <div class="full">
            <label>Descrição</label>
            <input type="text" id="desc">
        </div>
        <div class="full">
            <label>URL da Thumbnail</label>
            <input type="text" id="thumb">
        </div>
        <button class="btn save-item" onclick="addItem()">ATUALIZAR LISTA</button>
    </div>

    <div id="list" style="margin-top: 20px;"></div>

    <div class="code-output">
        <label style="color: #22c55e;">Código Gerado (Copia isto):</label>
        <textarea id="codeArea" readonly placeholder="O código aparecerá aqui..."></textarea>
        <button class="btn copy-btn" onclick="generateAndCopy()">1. GERAR CÓDIGO PARA VIDEOS.JS</button>
    </div>
</div>

<script src="videos.js"></script>
<script>
    let data = (typeof tutorialData !== 'undefined') ? tutorialData : [];

    function render() {
        const listEl = document.getElementById('list');
        listEl.innerHTML = data.map((item, i) => `
            <div class="item">
                <span><b>${item.title}</b> (${item.program})</span>
                <div class="actions">
                    <button class="edit" onclick="editItem(${i})"><i class="fas fa-pen"></i></button>
                    <button class="del" onclick="deleteItem(${i})"><i class="fas fa-trash"></i></button>
                </div>
            </div>
        `).join('');
    }

    function addItem() {
        const idx = document.getElementById('editIndex').value;
        const obj = {
            section: document.getElementById('section').value,
            program: document.getElementById('program').value,
            type: "video", // Por padrão vídeo
            tag: "Tutorial",
            title: document.getElementById('title').value,
            desc: document.getElementById('desc').value,
            id: document.getElementById('id').value,
            thumb: document.getElementById('thumb').value
        };
        if(idx === "") data.push(obj); else data[idx] = obj;
        document.getElementById('editIndex').value = "";
        render();
    }

    function editItem(i) {
        const item = data[i];
        document.getElementById('editIndex').value = i;
        document.getElementById('title').value = item.title;
        document.getElementById('id').value = item.id;
        document.getElementById('desc').value = item.desc;
        document.getElementById('thumb').value = item.thumb;
        document.getElementById('program').value = item.program;
        window.scrollTo(0,0);
    }

    function deleteItem(i) { data.splice(i,1); render(); }

    function generateAndCopy() {
        const finalCode = `const tutorialData = ${JSON.stringify(data, null, 2)};`;
        document.getElementById('codeArea').value = finalCode;
        document.getElementById('codeArea').select();
        document.execCommand('copy');
        alert("Código gerado e copiado! Agora abre o ficheiro videos.js, apaga tudo e cola este código novo.");
    }

    render();
</script>
</body>
</html>
